(()=>{const e=document.querySelector(".btnlist"),t=document.querySelector(".weatherblock"),n=document.querySelector(".box"),i="http://api.openweathermap.org/data/2.5/weather?",o="&appid=bc51ce4292a1207cc0f4276247d806ab";let r=localStorage.getItem("location"),a=new class{constructor(e){this.elem=e}handleEvent(t){t.target!=e&&(t.target.classList.contains("current")?function(e){for(let t of e)t.classList.remove("current"),t.style.display="block"}(e.children):(function(e){for(let t of e)t.classList.remove("current"),t.style.display="none"}(e.children),t.target.style.display="block",t.target.classList.toggle("current"),localStorage.setItem("location",`${t.target.innerText}`),fetch(`${i}q=${t.target.innerText}&units=metric${o}`).then((e=>e.json())).then((e=>{s(e)}))))}}(e);function s(e){let i,o=new Date;o.setSeconds(o.getSeconds()+e.timezone),i=e.wind.deg<90?"N":e.wind.deg<180?"E":e.wind.deg<270?"S":"W",t.innerHTML=`\n  <img src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png" class="statusimg">\n  <h3>${Math.round(e.main.temp)}°С</h3>\n  <p>${e.weather[0].description}</p>`,n.innerHTML=`\n  <p>${o.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1,timeZone:"UTC"})}</p>\n  <h3>${e.name}, ${e.sys.country}</h3>\n  <div class="flex"><img src="http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png"><h3>${Math.round(e.main.temp)}°С</h3></div>\n  <p>Feels like ${Math.round(e.main.feels_like)}°С. ${e.weather[0].main}. ${e.weather[0].description}</p>\n  <div class="wind">\n  <div class="windrow">\n  <p><img src="arrow.png" class='arrow' style="transform: rotate(${e.wind.deg}deg)">  ${e.wind.speed}m/s ${i}</p><p>${e.main.pressure} hPa</p><p>Humidity:${e.main.humidity}%</p>\n  </div>\n  <p>Dew point: ${Math.round(e.main.temp)}°С  Visibillity: ${e.visibility/1e3} Km</p>\n  </div>\n  `}e.addEventListener("click",a),fetch(`${i}q=${r}&units=metric${o}`).then((e=>e.json())).then((e=>{s(e)})),navigator.geolocation.getCurrentPosition((function(e){let t=e.coords;fetch(`${i}lat=${t.latitude}&lon=${t.longitude}&units=metric${o}`).then((e=>e.json())).then((e=>{s(e)}))}),(function(e){console.warn(`ERROR(${e.code}): ${e.message}`),console.warn("Last chosen location opened")}))})();